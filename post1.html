<!DOCTYPE html>
<html>
  <head>
    <title>Learning Covenant C2</title>
    <meta charset="utf-8" />
    <meta name="robots" content="index, follow" />
    <meta name="revisit-after" content="1 days" />
    <meta name="author" content="Kane Pickrel" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/css/post.css" />
    <link rel="shortcut icon" href="assets/css/images/icon.ico" />
    <!-- Add FontAwesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>
  <body>
    
    <li>
      <a 
      id="myButton" 
      href="post.html"
      class="icon fa-arrow-left"
      target="_self"
      ></a>
    </li>

      <!-- Navigation Bar -->
      <nav id="navbar">
        <ul>
          <li>
            <a
              href="index.html"
              id="home-link"
              class="icon fa-home"
              target="_self"
              ><span class="label">Home</span></a
            >
          </li>
          <li>
            <a
              href="https://www.linkedin.com/in/kane-pickrel-9288a691/"
              class="icon fa-linkedin"
              target="_blank"
              ><span class="label">Linkedin</span></a
            >
          </li>
          <li>
            <a
              href="https://github.com/kanepickrell"
              class="icon fa-github"
              target="_blank"
              ><span class="label">Github</span></a
            >
          </li>
          <li>
            <a
              href="mailto:kanepickrell@gmail.com"
              class="icon fa-envelope-o"
              target="_blank"
              ><span class="label">Email</span></a
            >
          </li>
        </ul>
      </nav>

      <!-- Post Section -->
      <section id="post-section">
        <article>
          
          <p>=======</p>
          <h3>Learning Covenant C2 - Setup Guide & Lessons learned</h3> 
          <p style="color: gray; font-size: larger; margin-top: -10px;">45 minute read - Published: 22 Dec, 2023</p>

          <p>
          <strong>Introduction</strong><br>
            > In this guide, I'll show you how to set up Covenant C2 and establish your first listener in under an hour.<br>
            > My lack of experience in .NET and installing dependencies offline turned out to be more time-consuming than necessary. That being said, my mission is to spare you this hassle and provide a straightforward, easy-to-follow tutorial to streamline your setup process.<br>
            > As my focus will be to show you what to look out for when installing offline, I'll also walk through setting up on a Kali machine with internet access.<br>
            > I'll admit I am novice in red teaming, so this is intended for those who are also absolute beginners who have never used a command and control (C2) before. <br><br>
            
            <strong>Section 0: Technology Overview</strong><br>
            > Covenant C2 is a command and control (C2) post-exploitation framework. As of mid-September 2019, Covenant is considered one of the latest and advanced frameworks in this area.<br>
            <em>> Prerequisites:</em> Compatible with Windows 10 workstations, recent Windows Server OS, or Linux distributions supporting .NET Core. Required applications: GIT and .NET Core 2.2 SDK.<br>
            <em>> Installation Process:</em> Covenant uses a modern, cross-platform architecture and does not come with a traditional installer. Installation involves cloning the project git repository and building and running the application.<br>
            <br>
            <strong>Section 1.a: Online Installation</strong><br>
            > Below are the steps illustrated in <a href="https://github.com/cobbr/Covenant/wiki/Installation-And-Startup" style="font-weight: bold;" target="_blank">Covenant C2's official documentation.</a><br>
            
            > Starting from your Kali machine, you can clone and cd into your new Covenant package.<br>
            <pre><code>
              > git clone --recurse-submodules https://github.com/cobbr/Covenant
              > cd Covenant/Covenant
              </code></pre>
              > Before you build the Covenant project, you'll run as root user and update the dotnet system global variant.<br>
              > If you don't add this rule to the zsh script, you'll recieve a "Couldn't find a valid ICU package installed on the system". <br>
              > This typically occurs in Dotnet Core projects or packaged Dotnet Core binaries running on Ubuntu due to a missing dependency for Unicode and Globalization support.
              <pre><code>
                > sudo su
                > vim ~/.zshrc
              </code></pre>

              <img src="assets\css\images\dotnet_rule.jpeg"><br>

              <pre><code>
                > dotnet build
                > dotnet run
              </code></pre>
            > You should now see that your Covenant dashboard has been activated and at https://{local_ip}:7443.<br>            
            > This concludes the online installation and you are ready to explore the dashboard in Section 2!<br><br>

            <strong>Section 1.b: Offline Kali Installation</strong><br>
            > On an online Windows/Mac/Linux machine, run the following commands and save to a zipped folder<br>
            > Once you copy you zipped file over to your Kali machine, extract and CD into your Covenant folder. <br>
            > If you try to 'dotnet build' your project you'll encounter this error. <br><br>
            <img src="assets\css\images\nuget_err.jpeg"><br><br>

            > This is where I had trouble with dependencies. .NET is trying to reach out to the internet and download its required Nuget dependencies.<br>
            > The dependencies you will need can be downloaded here. <br>
            > Once you download these to your online Windows/Mac/Linux, copy them over to Linux and upload them here. <br>
            > In covenant, you'll now make two configurations to the nuget.config file.
            > Config 1 with picture
            > Config 2 with picture

            <pre><code>
              > dotnet build
              > dotnet run
            </code></pre>

            > ...This concludes the offline installation and you are ready to start your first listener in Section 2!<br><br>
        
            <strong>Section 2:Covenant Dashboard Basics</strong><br>
            > So once you verify that Covenant is running, let's talk about the dashboard.<br>
            > The dashboard is divided into three main sections: Grunts, Listeners, and Tasks.<br>
            > Grunts are the agents controlled by the Covenant framework, designed to execute tasks and payloads on compromised hosts, reporting back to the Covenant server. <br>
            > Listeners are the endpoints that Grunts connect to. Listeners are responsible for receiving Grunt connections, authenticating them, and relaying commands and responses between the Grunt and the Covenant server. <br>
            > Tasks are the actions that Grunts can perform. Tasks are executed on Grunts and can be used to perform actions on the host, such as executing a shell command, uploading a file, or executing a Covenant script. <br>

            <strong>Setting Up Your First Listener</strong><br>
          </p>
        </article>
      </section>

  </body>
</html>
